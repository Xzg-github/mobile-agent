(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/login"],{"23ad":function(t,e,a){},7858:function(t,e,a){"use strict";var n=a("23ad"),o=a.n(n);o.a},a924:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(a("bf8d")),o=a("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){u(t,e,a[e])})}return t}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var s={computed:(0,o.mapState)(["hasLogin","uerInfo"]),data:function(){return{obj:{username:"",password:"",extension:""},agentNo:"",port:"",ctiIp:""}},onLoad:function(){var e=this;t.getStorage({key:"userObj",success:function(t){t.data&&(e.obj.username=t.data.username,e.obj.password=t.data.password,e.obj.extension=t.data.extension)}})},methods:i({formSubmit:function(){var e=this,a=this;if(""==a.obj.username)return t.showModal({title:"提示",content:"请输入用户名",showCancel:!1}),!1;if(""==a.obj.password)return t.showModal({title:"提示",content:"请输入密码",showCancel:!1}),!1;var o={};o.username=this.obj.username,o.password=this.obj.password,o.extension=this.obj.extension,t.setStorage({key:"userObj",data:o}),t.showLoading({title:"加载中"}),t.request({method:"POST",url:this.apiDomian+"/jwt/oauth",data:{username:a.obj.username,password:(0,n.default)(a.obj.password),tenantCode:"default"},header:{"content-type":"application/x-www-form-urlencoded"}}).then(function(n){t.hideLoading();var o=n[1].data;if("200"!=o.status)t.showModal({title:"提示",content:o.statusText,showCancel:!1});else{var r=o.data.token,i=o.data.id;t.request({method:"GET",url:e.apiDomian+"/dictionary/useable",data:{},header:{"content-type":"application/json",Authorization:"Arch6WithCloud "+r}}).then(function(e){var a=[];a=e[1].data.data,t.setStorage({key:"allDate",data:a,success:function(){}})}),t.request({method:"POST",url:e.apiDomian+"/onlineAgent/login",data:{agentId:e.obj.username,agentName:o.data.nickname,phoneNo:a.obj.extension},header:{"content-type":"application/json",Authorization:"Arch6WithCloud "+r}}),t.request({method:"GET",url:e.apiDomian+"/platform/jwt/"+i,data:{},header:{"content-type":"application/json",Authorization:"Arch6WithCloud "+r}}).then(function(n){a.agentNo=n[1].data.data.agent.agentNo;var r=n[1].data.data.ctiIpPort.split(":");a.port=r[0],a.ctiIp=r[1];var i={};i.nickname=o.data.nickname,i.username=o.data.username,i.agentNo=a.agentNo,i.organName=o.data.organName,i.organId=o.data.organId,i.organCode=o.data.organCode,i.roleNames=o.data.roleNames.slice(1,-1),i.id=o.data.id,i.token=o.data.token,i.extension=a.obj.extension,i.port=a.port,i.ctiIp=a.ctiIp,e.login(i),t.sendSocketMessage({data:"Method|init|"+a.port+"|"+a.ctiIp+"|"+a.agentNo+"||"+a.obj.extension+"|4||",success:function(t){JSON.stringify(t)}}),t.reLaunch({url:"/pages/index/home"})})}})}},(0,o.mapMutations)(["login"]))};e.default=s}).call(this,a("6e42")["default"])},af78:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},d369:function(t,e,a){"use strict";a.r(e);var n=a("a924"),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=o.a},dd30:function(t,e,a){"use strict";(function(t){a("4976"),a("832f");n(a("66fd"));var e=n(a("e121"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},e121:function(t,e,a){"use strict";a.r(e);var n=a("af78"),o=a("d369");for(var r in o)"default"!==r&&function(t){a.d(e,t,function(){return o[t]})}(r);a("7858");var i=a("2877"),u=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=u.exports}},[["dd30","common/runtime","common/vendor"]]]);