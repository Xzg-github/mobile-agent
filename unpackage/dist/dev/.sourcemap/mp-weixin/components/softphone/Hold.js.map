{"version":3,"sources":["webpack:///D:/wechat/mobile-agent/components/softphone/Hold.vue?bbb4","webpack:///D:/wechat/mobile-agent/components/softphone/Hold.vue?840d","webpack:///D:/wechat/mobile-agent/components/softphone/Hold.vue?97e1","webpack:///D:/wechat/mobile-agent/components/softphone/Hold.vue?dc3f","webpack:///D:/wechat/mobile-agent/components/softphone/Hold.vue"],"names":["props","computed","data","state","pop","phoneData","newPhoneNum","query","ajaxInfoArr","infoArr","mounted","getInfo","methods","getMsg","self","text","length","arr","temp","i","agentId","toString","indexOf","agentName","phoneNo","push","api","getInfoAjax","apiDomian","uerInfo","token","changeClose","$emit","Unhold","socketMain","unHold","stra","consult","replace","phoneFlag","common","checkPhone","consultAjax","getDialNumber","areaCode","dial","phoneNum","iniConsult","uni","showToast","title","duration","icon","blindtransfer","key","blindTransferAjax","blindTransfer","showPop","close","changeNav"],"mappings":"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","file":"components/softphone/Hold.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./Hold.vue?vue&type=template&id=80f3d44e&\"\nvar renderjs\nimport script from \"./Hold.vue?vue&type=script&lang=js&\"\nexport * from \"./Hold.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('80f3d44e')) {\n      api.createRecord('80f3d44e', component.options)\n    } else {\n      api.reload('80f3d44e', component.options)\n    }\n    module.hot.accept(\"./Hold.vue?vue&type=template&id=80f3d44e&\", function () {\n      api.rerender('80f3d44e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"wechat/mobile-agent/components/softphone/Hold.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Hold.vue?vue&type=template&id=80f3d44e&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Hold.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Hold.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport socketYatai from \"@/components/softphone/config/socket/yatai\";\nimport socketMain from \"@/components/softphone/config/socket/main\";\nimport common from \"@/components/softphone/config/common\";\nimport api from \"@/components/softphone/config/api\";\nimport {  mapState,  mapMutations  } from 'vuex';\n\nexport default {\n\tprops:['timer','stra','strb'],\n\tcomputed: mapState(['hasLogin','uerInfo']),\n\tdata() {\n\t\treturn {\n\t\t\tstate : 'A',\n\t\t\tpop: '', //控制弹窗\n\t\t\tphoneData:'', //输入的外部号码\n\t\t\tnewPhoneNum:'', //外地手机加0\n\t\t\tquery:'', //搜索框的值\n\t\t\tajaxInfoArr:[], //筛选在线坐席列表的变量 \n\t\t\tinfoArr:[], //在线坐席列表\n\t\t}\n\t},\n\t\n\t\n\tmounted: function(){\n\t\t\n\t\tthis.getInfo() //获取在先坐席分机\n\t},\n\t\n\tmethods: {\n\t\t\n\t\t//关键字筛选\n\t\tgetMsg(){\n\t\t\tvar self = this\n\t\t\t//关键字搜索\n\t\t\tvar text = this.query //输入框的值\n\t\t\tvar length = text.length; //输入框值的长度\n\t\t\tvar arr = this.ajaxInfoArr \n\t\t\tvar temp = []\n\t\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\t\tif(arr[i].agentId.toString().indexOf(text) != -1\n\t\t\t\t\t||arr[i].agentName.indexOf(text) != -1\n\t\t\t\t\t\t||arr[i].phoneNo.indexOf(text) != -1\n\t\t\t\t){\n\t\t\t\t\ttemp.push(arr[i]) //重新赋值 \n\t\t\t\t}\n\t\t\t}\n\t\t\tself.infoArr = temp\n\t\t},\n\t\t\n\t\t//获取在线坐席分机\n\t\tgetInfo(){\n\t\t\tvar self = this\n\t\t\tapi.getInfoAjax(self.apiDomian,self.uerInfo.token,function(data){\n\t\t\t\tself.ajaxInfoArr = data[1].data.data\n\t\t\t\tself.infoArr = data[1].data.data\n\t\t\t})\n\t\t},\n\t\t\n\t\t\n\t\t//关闭弹窗\n\t\tchangeClose(){\n\t\t\tthis.$emit('close')\n\t\t},\n\t\t\n\t\t//取消保持\n\t\tUnhold(){\n\t\t\tsocketMain.unHold(this.stra) \n\t\t},\n\t\t\n\t\t// 咨询\n\t\tconsult (phoneNo){\n\t\t\tvar self = this\n\t\t\tself.phoneData = self.phoneData.replace(/\\s/g, \"\")\n\t\t\tvar phoneFlag = common.checkPhone(self.phoneData)\n\t\t\tif(!phoneFlag){\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (phoneNo.length > 6){\n\t\t\t\t\n\t\t\t\tasync function consultAjax () {\n\t\t\t\t\t//异地号码前加0 （9固定写）例9018575663545\n\t\t\t\t\tvar dial = await api.getDialNumber(self.phoneData,self.uerInfo.areaCode,self.apiDomian,self.uerInfo.token)\n\t\t\t\t\tvar phoneNum = '9'+dial[1].data.data\n\t\t\t\t\tself.newPhoneNum = phoneNum\n\t\t\t\t\t\n\t\t\t\t\tsocketMain.iniConsult(self.newPhoneNum,self.stra,self.phoneData,function(){\n\t\t\t\t\t\tself.$emit(\"funa\", true); \n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tconsultAjax () \n\t\t\t}else if (phoneNo.length == 0){\n\t\t\t\tuni.showToast({\n\t\t\t\t    title: '请输入手机号码',\n\t\t\t\t    duration: 2000,\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tsocketMain.iniConsult(phoneNo,this.stra,function(){\n\t\t\t\t\tself.$emit(\"funa\", true);\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t\n\t\t//盲转接\n\t\tblindtransfer(key){\n\t\t\tvar self = this\n\t\t\tself.phoneData = self.phoneData.replace(/\\s/g, \"\")\n\t\t\tvar phoneFlag = common.checkPhone(self.phoneData)\n\t\t\tif(!phoneFlag){\n\t\t\t\treturn false\n\t\t\t} \n\t\t\tif(key.length > 6){\n\t\t\t\tasync function blindTransferAjax () {\n\t\t\t\t\t//异地号码前加0 （9固定写）例9018575663545\n\t\t\t\t\tvar dial = await api.getDialNumber(self.phoneData,self.uerInfo.areaCode,self.apiDomian,self.uerInfo.token)\n\t\t\t\t\tvar phoneNum = '9'+dial[1].data.data\n\t\t\t\t\tself.newPhoneNum = phoneNum\n\t\t\t\t\t\n\t\t\t\t\tsocketMain.blindTransfer(self.newPhoneNum,self.phoneData) //参数1:亚太的转接外部号码  参数2:aspect转接的外部号码\n\t\t\t\t}\n\t\t\t\tblindTransferAjax ()  \n\t\t\t} else if (key.length == 0){\n\t\t\t\tuni.showToast({\n\t\t\t\t    title: '请输入手机号码',\n\t\t\t\t    duration: 2000,\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tsocketMain.blindTransfer(key)\n\t\t\t}\n\t\t\t\n\t\t},\n\t\t\n\t\t//切换咨询、转接的弹窗\n\t\tshowPop(key){\n\t\t\tthis.pop = key\n\t\t},\n\t\t//关闭弹窗\n\t\tclose(){\n\t\t\tthis.pop = 0\n\t\t},\n\t\t\n\t\t// 切换导航\n\t\tchangeNav(key) {\n\t\t\tthis.state = key\n\t\t},\n\t}\n}\n"],"sourceRoot":""}