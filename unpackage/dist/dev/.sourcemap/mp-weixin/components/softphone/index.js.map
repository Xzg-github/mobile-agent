{"version":3,"sources":["webpack:///C:/hx/wechat（yatai)/components/softphone/index.vue?af3e","webpack:///C:/hx/wechat（yatai)/components/softphone/index.vue?e9f4","webpack:///C:/hx/wechat（yatai)/components/softphone/index.vue?3651","webpack:///C:/hx/wechat（yatai)/components/softphone/index.vue?2628","webpack:///C:/hx/wechat（yatai)/components/softphone/index.vue"],"names":["props","class_a","String","socketObj","Object","phone","Number","pageName","toCallFlag","socketType","computed","components","Login","AgreeLogin","Available","Callphone","Handup","Callsuccess","Hold","Consult","Meeting","Reprocessing","Logining","Callcontent","Answer","data","expand","timer_inter","timer","phonenum","state","show","meeting_flag","leftval","setStateActiveCallId","setStateCallId","otherPage","callPhone","endDate","starDate","city","province","phoneCode","callStartTime","endTime","phoneArea","requestFlag","customerCode","customerName","bossFlag","callFlag","connectFlag","phoneCallID","watch","dataobj","prevData","self","getTimeDate","socketMain","clickBtn","receiveEven","receiveEvenName","name","type","callid","$emit","callEndTime","localstate","console","log","callinfo","split","page_len","getCurrentPages","length","route_name","route","uni","switchTab","url","temp_phone","temp_phone2","uerInfo","extension","setStorage","key","success","getLastimes","tel","phone1","parseInt","toString","phone2","apiinsAdd","showToast","title","duration","icon","mounted","common","getCurrentDay","getPrevMonthDay","methods","getInfo","setPhone","api","getPhoneCode","apiDomian","token","rs","getCusInfo","obj","infoArr","records","clientId","clientName","post_obj","callType","ani","dnis","userCode","username","userName","nickname","organCode","organName","agentNo","serviceLog","campaignId","batchId","taskId","callId","serviceStartTime","getApiinsAdd","getLastime","callEndTimes","getMsgSon","val1","val2","getLogout","val","endPhone","getStorage","res","func","batchTaskUpdate","serviceData","contactUpdate","serviceEndTime","apiinsEditUpdate","platformType","agentavailable","getStorageSync","close","changeOpen","getState","getCallNum","num","setMeeting","flag","getCallPhoneFlag","clearInterval","hh","mm","ss","str","setInterval"],"mappings":"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","file":"components/softphone/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=4c4b47e7&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4c4b47e7')) {\n      api.createRecord('4c4b47e7', component.options)\n    } else {\n      api.reload('4c4b47e7', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=4c4b47e7&\", function () {\n      api.rerender('4c4b47e7', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"hx/wechat（yatai)/components/softphone/index.vue\"\nexport default component.exports","export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=4c4b47e7&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {  mapState,  mapMutations  } from 'vuex';\nimport Login from \"@/components/softphone/Login.vue\" \nimport Logining from \"@/components/softphone/Logining.vue\"\nimport Available from \"@/components/softphone/Available.vue\"\nimport AgreeLogin from \"@/components/softphone/AgreeLogin.vue\"\nimport Callphone from \"@/components/softphone/Callphone.vue\"\nimport Handup from \"@/components/softphone/Handup.vue\"\nimport Callsuccess from \"@/components/softphone/Callsuccess.vue\"\nimport Hold from \"@/components/softphone/Hold.vue\"\nimport Consult from \"@/components/softphone/Consult.vue\"\nimport Meeting from \"@/components/softphone/Meeting.vue\"\nimport Reprocessing from \"@/components/softphone/Reprocessing.vue\"\nimport Callcontent from \"@/components/softphone/Callcontent.vue\"\nimport Answer from \"@/components/softphone/Answer.vue\"\n\nimport common from \"@/components/softphone/config/common\";\nimport api from \"@/components/softphone/config/api\";\n\nimport socketMain from \"@/components/softphone/config/socket/main\";\nimport socketApi from \"@/components/softphone/config/socket/yatai\";\n\nexport default {\n\tprops: {\n\t\tclass_a: String,\n\t\tsocketObj: Object,\n\t\tphone: Number,\n\t\tpageName: String,\n\t\ttoCallFlag: String,\n\t\tsocketType: String\n\t},\n\t\n\t// 提取存储数据\n\tcomputed: mapState(['hasLogin', 'uerInfo']),\n\t\n\tcomponents :{\n\t\tLogin, //签入1\n\t\tAgreeLogin,  //登入成功（默认示忙）2\n\t\tAvailable,  //示闲 3\n\t\tCallphone, //拨打电话4\n\t\tHandup, // 振铃中(挂断按钮) 5\n\t\tCallsuccess, //接通电话6\n\t\tHold, //保持7\n\t\tConsult, //咨询8\n\t\tMeeting, //会议9\n\t\tReprocessing, //结束后处理10\n\t\tLogining, //签入中 11\n\t\tCallcontent, //通话连接中12\n\t\tAnswer, //接听13\n\t},\n\t\n\tdata() {\n\t\treturn {\n\t\t\texpand: false,  // 是否展开软电话\n\t\t\ttimer_inter: false, //计时器\n\t\t\ttimer: '00:00:00',    \n\t\t\tphonenum: '', //拨号输入的值\n\t\t\tstate : false, //当客户挂断电话后客户这边挂断的情况\n\t\t\tshow: 1, //1签入 2 示忙 3 示闲 4拨打电话 5振铃中(挂断按钮)  6接通电话  7保持 8咨询 9会议 10结束后处理 11签入中 12连接中 13接听来电\n\t\t\tmeeting_flag: false,\n\t\t\tleftval:'', //切换示忙原因\n\t\t\tsetStateActiveCallId:'',  //普通用户id(当前接听的电话)\n\t\t\tsetStateCallId:'', // 平台客服id(转接、咨询等操作)\n\t\t\totherPage: false,  // 是否从别的页面来\n\t\t\tcallPhone:'',//呼入电话\n\t\t\tendDate:'', //结束时间(今天时间)\n\t\t\tstarDate:'', //开始时间（一个月前）\n\t\t\tcity:'', //电话号码的所在城市\n\t\t\tprovince:'',//电话号码的所在省份\n\t\t\tphoneCode:'',//手机区号\n\t\t\tcallStartTime:'', //每次通话开始保存一个时间\n\t\t\tendTime:'',//通话结束时间\n\t\t\tphoneArea: {}   ,//手机归属地对象\n\t\t\trequestFlag: false,//判断新建联络历史接口只请求一次\n\t\t\tcustomerCode:'', //客户ID\n\t\t\tcustomerName:'', //客户姓名\n\t\t\tbossFlag: false,// 判断是否是被咨询方   客服打给客服\n\t\t\tcallFlag: '',//拨号的标识\n\t\t\tconnectFlag : '', //判断电话有没有接通\n\t\t\tphoneCallID: '' //新建接口传的callid 比较长的号码\n\t\t}\n\t},\n\t\n\twatch:{\n\t\tsocketObj(dataobj,prevData){\n\t\t\tvar self = this  \n\t\t\tself.getTimeDate()  //计时器\n\t\t\t\n\t\t\t//主动触发按钮 改变show\n\t\t\tthis.show = socketMain.clickBtn(dataobj,this.show)\n\t\t\t/*if(this.uerInfo.platformType != '3'){\n\t\t\t\treturn false\n\t\t\t}*/\n\t\t\t\n\t\t\t//接受实时事件\n\t\t\tvar receiveEven = socketMain.receiveEvenName(dataobj)\n\t\t\tswitch (receiveEven.name){   \n\t\t\t\tcase receiveEven.type[0]: //接通中\n\t\t\t\t\t//socketMain.originated() \n\t\t\t\t\tif(!self.meeting_flag){ //不在会议的情况 点击咨询不进入判断 会直接跳状态8\n\t\t\t\t\t\tself.show = 12 //连接中\n\t\t\t\t\t\tself.setStateActiveCallId = dataobj.callid\n\t\t\t\t\t\tself.$emit(\"setStateActiveCallId\",self.setStateActiveCallId); \n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tbreak;\n\t\t\t\tcase receiveEven.type[1]: //挂断\n\t\t\t\t\tself.callEndTime() //通话结束储存一个时间 \n\t\t\t\t\tself.$emit(\"callEndTime\",self.endTime); \n\t\t\t\t\t\n\t\t\t\t\tif( self.show == 5 ){ //客服挂断客服的通话\n\t\t\t\t\t\tif ( dataobj.localstate == '-1' ){\n\t\t\t\t\t\t\tself.show =10\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tself.show = 7\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//self.show = 7\n\t\t\t\t\t}else if( self.show == 6 ){ //客服挂断当前通话中的通话（挂断咨询的客服）\n\t\t\t\t\t\tif ( dataobj.localstate == '-1' && self.meeting_flag){ //客服挂断与客服的通话\n\t\t\t\t\t\t\tself.show = 7\n\t\t\t\t\t\t}else {   //客服挂断与客户的通话\n\t\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t\t}  \n\t\t\t\t\t} else if ( self.show == 7 ){ //客户挂断当前通话\n\t\t\t\t\t\tif( dataobj.localstate == '0' ){    // 被咨询的客户挂断\n\t\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t\t}else if ( dataobj.localstate == '-1' ){ \n\t\t\t\t\t\t\tif(self.meeting_flag){   //客服挂断与客户的通话\n\t\t\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t\t\t}else if(self.state == true){ //客户挂断电话后  客服挂断\n\t\t\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {   //客服挂断与被咨询的通话\n\t\t\t\t\t\t\t\tself.show = 7\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if ( dataobj.localstate == '4' ){ //客户挂断\n\t\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t\t}\n\t\t\t\t\t}else if ( self.show == 8 ){ \n\t\t\t\t\t\tif(self.meeting_flag && dataobj.localstate != '-1'){ //客服挂断客服\n\t\t\t\t\t\t\tself.show = 5\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tself.show = 7\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}else if ( self.show == 10 ){ //客服挂断客服\n\t\t\t\t\t\tif(!self.meeting_flag){ // 非咨询\n\t\t\t\t\t\t\tself.show = 10 \n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tself.show = 7\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}else {\n\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t} \n\t\t\t\t\t\n\t\t\t\t\tself.meeting_flag = false\n\t\t\t\t\tbreak;\n\t\t\t\t\t   \n\t\t\t\tcase receiveEven.type[2]:   //振铃\n\t\t\t\t\tconsole.log('振铃中....')\n\t\t\t\t\tif(!self.meeting_flag){\n\t\t\t\t\t\tself.phoneCallID = dataobj.callinfo.split('/')[2]  //接口传的callid 比较长的号码\n\t\t\t\t\t\tself.$emit(\"phoneCallID\",self.phoneCallID);\n\t\t\t\t\t\tself.setStateActiveCallId = dataobj.callid //存储CallID\n\t\t\t\t\t\tself.$emit(\"setStateActiveCallId\",self.setStateActiveCallId); \n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(self.otherPage){    // 别的页面来的  第2次响铃就不管了\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t\tself.otherPage = true\n\t\t\t\t\t\t\t\t\n\t\t\t\t    //呼入弹屏回到首页接收\n\t\t\t\t\tvar page_len = getCurrentPages().length\n\t\t\t\t\tvar route_name = getCurrentPages()[page_len-1].route\n\t\t\t\t\t\n\t\t\t\t\tif(route_name != 'pages/home/roster/callOut' && !self.callFlag ){\n\t\t\t\t\t\t//console.log(9998)\n\t\t\t\t\t\tself.callPhone = dataobj.callinfo.split('/')[0] //呼入电话存储\n\t\t\t\t\t\tself.$emit(\"getPhoneObj\",self.callPhone); //呼入电话  \n\t\t\t\t\t\t\n\t\t\t\t\t\tself.$emit(\"getPageLen\",2);//控制呼入弹屏 \n\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\turl:'/pages/index/home'  \n\t\t\t\t\t\t})\n\t\t\t\t\t}else if( route_name == 'pages/home/roster/callOut' \n\t\t\t\t\t\t\t\t&& self.pageName != '首页' \n\t\t\t\t\t\t\t\t&& !self.toCallFlag\n\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t//console.log(9999)\n\t\t\t\t\t\t\t\tself.$emit(\"getPageLen\",2);//控制呼入弹屏 \n\t\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\t\turl:'/pages/index/home'\n\t\t\t\t\t\t\t\t}) \n\t\t\t\t\t\t\t\tself.toCallFlag = true \n\t\t\t\t\t\t\t\n\t\t\t\t\t}else {\n\t\t\t\t\t\t//console.log(9997) \n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar temp_phone = dataobj.callinfo.split('/')[0]  //主叫号码\n\t\t\t\t\tvar temp_phone2 = dataobj.callinfo.split('/')[1]  //被叫号码 （如果两个号码相等说明是被咨询）\n\t\t\t\t\t\n\t\t\t\t\tif(temp_phone.length > 6){ //用户打进来接听电话  保存电话号码 (这里还需考虑到客服跟客服的通话号码是4)\n\t\t\t\t\t\tself.show = 13 // 接听\n\t\t\t\t\t\tself.phonenum = temp_phone\n\t\t\t\t\t\tself.setStateActiveCallId = dataobj.callid\n\t\t\t\t\t} else if ( temp_phone.length == temp_phone2.length && !self.meeting_flag){ //两个号码相等 且不在会议中=被咨询方\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 判断第一位是不是自己   自己5   否则13   \n\t\t\t\t\t\tif(self.uerInfo.extension == temp_phone){\n\t\t\t\t\t\t\tself.show = 5\n\t\t\t\t\t\t\tself.phonenum = temp_phone2\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tself.show = 13 // 接听\n\t\t\t\t\t\t\tself.phonenum = temp_phone\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//self.show = 13 // 接听\n\t\t\t\t\t\t//self.phonenum = temp_phone\n\t\t\t\t\t\tself.setStateActiveCallId = dataobj.callid\n\t\t\t\t\t\tself.bossFlag = true\n\t\t\t\t\t\tself.$emit(\"bossFlag\",self.bossFlag);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\telse if ( self.meeting_flag ) {  // 咨询的时候不显示 振铃中   \n\t\t\t\t\t\tself.show = 8      // 咨询中\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.show = 5    // 挂断    \n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase receiveEven.type[3]: //通话中\n\t\t\t\t\tself.connectFlag = 'Y' //接通的标识\n\t\t\t\t\tself.$emit(\"connectFlag\",self.connectFlag); \n\t\t\t\t\t\n\t\t\t\t\t// 设置不可结束软电话\n\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\tkey: 'endPhoneFlag',\n\t\t\t\t\t\tdata: false,\n\t\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tif(self.meeting_flag){   // 多人进入会议\n\t\t\t\t\t\tself.show = 8 \n\t\t\t\t\t}else {\n\t\t\t\t\t\tself.show = 6 \n\t\t\t\t\t\tself.getLastimes() //通话开始储存一个时间\n\t\t\t\t\t\tself.$emit(\"callStartTime\",self.callStartTime); \n\t\t\t\t\t\t\n\t\t\t\t\t\tvar page_len = getCurrentPages().length\n\t\t\t\t\t\tvar route_name = getCurrentPages()[page_len-1].route\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(route_name == 'pages/home/roster/callOut'){\n\t\t\t\t\t\t\tif( self.requestFlag == false ){//判断新建接口是否请求\n\t\t\t\t\t\t\t\tself.$emit('apiinsAdd')\n\t\t\t\t\t\t\t\tself.requestFlag = true //请求完后面不需再请求\n\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else if( self.pageName == '首页' ){\n\t\t\t\t\t\t\tconsole.log('进入了首页')\n\t\t\t\t\t\t\tvar tel = dataobj.callinfo.split('/')\n\t\t\t\t\t\t\tvar phone1 = parseInt(tel[0]).toString() //主叫号码(去除首位0)\n\t\t\t\t\t\t\tvar phone2 = parseInt(tel[1]).toString() //被叫号码(去除首位0)\n\t\t\t\t\t\t\tif( self.requestFlag == false ){ //判断新建接口是否请求\n\t\t\t\t\t\t\t\tif( phone1.length > 6 ){\n\t\t\t\t\t\t\t\t\tself.apiinsAdd( '1',phone1,phone2 ) //新建 联络历史接口(呼入)\n\t\t\t\t\t\t\t\t\tself.requestFlag = true //请求完后面不需再请求\n\t\t\t\t\t\t\t\t} else if ( phone2.length > 6 ) {\n\t\t\t\t\t\t\t\t\tself.apiinsAdd( '0',phone1,phone2 ) //新建 联络历史接口(呼出)\n\t\t\t\t\t\t\t\t\tself.requestFlag = true//请求晚后面不需再请求\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase receiveEven.type[4]: //服务连接（获取咨询的callid）\n\t\t\t\t\tself.setStateCallId = dataobj.callid\n\t\t\t\t\t\n\t\t\t\t\tbreak;\t\n\t\t\t\tcase receiveEven.type[5]: //咨询中\n\t\t\t\t\tself.show = 10 \n\t\t\t\t\tbreak;\n\t\t\t\tcase receiveEven.type[6]: //失败\n\t\t\t\t\tself.setStateActiveCallId = dataobj.callid\n\t\t\t\t\tself.$emit(\"setStateActiveCallId\",self.setStateActiveCallId);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '连接数据异常',\n\t\t\t\t\t\tduration: 1500,\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}, \n\n\tmounted: function(){\n\t\t\n\t\tvar self = this\n\t\tthis.getTimeDate() // 计时器\n\t\tthis.endDate = common.getCurrentDay() //获取结束时间\n\t\tthis.starDate = common.getPrevMonthDay(this.endDate) //获取开始时间\n\t\tthis.phonenum = this.phone //详情页面传过来的电话\n\t},\n\n\n\tmethods: {\n\n\t\t//接通电话新建-联络历史\n\t\tapiinsAdd(key,phone1,phone2){\n\t\t\tvar self = this\n\t\t\tasync function getInfo(){\n\t\t\t\t\n\t\t\t\tif(key == 0){    //呼出\n\t\t\t\t\tvar setPhone = phone2\n\t\t\t\t}else{  //呼入\n\t\t\t\t\tvar setPhone = phone1\n\t\t\t\t}\n\t\t\t\t//获取手机归属地\n\t\t\t\tawait api.getPhoneCode(self.apiDomian,self.uerInfo.token,setPhone,function(data){\n\t\t\t\t\tvar rs = data[1].data.data\n\t\t\t\t\tif(rs){\n\t\t\t\t\t\tself.phoneArea = rs\n\t\t\t\t\t\tself.city = rs.city\n\t\t\t\t\t\tself.province = rs.province\n\t\t\t\t\t\tself.phoneCode = rs.phoneCode //电话区号\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\n\t\t\t\t//获取客户ID、姓名\n\t\t\t\tawait api.getCusInfo(self.apiDomian,self.uerInfo.token,setPhone,self.starDate,self.endDate,function(data){\n\t\t\t\t\tvar obj = data[1].data.data\n\t\t\t\t\tif(obj){\n\t\t\t\t\t\tvar infoArr = obj.records\n\t\t\t\t\t\tself.customerCode = infoArr[0].clientId //客户ID\n\t\t\t\t\t\tself.customerName = infoArr[0].clientName //客户姓名\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\n\t\t\t\tvar post_obj = {\n\t\t\t\t\tcallType: key, //呼叫方向\n\t\t\t\t\tani: phone1, //主叫号码\n\t\t\t\t\tdnis: phone2.length == 4 ? self.uerInfo.extension : phone2, //被叫号码\n\t\t\t\t\tcustomerCode: self.customerCode, //客户ID\n\t\t\t\t\tcustomerName: self.customerName, //客户姓名\n\t\t\t\t\tuserCode: self.uerInfo.username, //坐席工号\n\t\t\t\t\tuserName: self.uerInfo.nickname, //坐席姓名\n\t\t\t\t\torganCode: self.uerInfo.organCode, //坐席组织机构代码\n\t\t\t\t\torganName: self.uerInfo.organName, //坐席组织机构名称\n\t\t\t\t\tagentNo: self.uerInfo.agentNo, //坐席工号\n\t\t\t\t\tserviceLog:'', //服务结果(可以不传)\n\t\t\t\t\tcampaignId:'', //活动id (直接拨号的不传)\n\t\t\t\t\tbatchId:'', //批次id(直接拨号的不传)\n\t\t\t\t\ttaskId:'', //任务id(直接拨号的不传)\n\t\t\t\t\tphoneCode: self.phoneCode, //手机区号\n\t\t\t\t\tprovince: self.province , //归属地-省\n\t\t\t\t\tcity: self.city, //归属地-市\n\t\t\t\t\tcallId: self.phoneCallID, //通话id（较长的号码） \n\t\t\t\t\tcallStartTime: self.callStartTime, //通话开始时间\n\t\t\t\t\tserviceStartTime: self.callStartTime, //通话开始时间\n\t\t\t\t}\n\t\t\t\tawait api.getApiinsAdd(self.apiDomian,self.uerInfo.token,post_obj)\n\t\t\t}  \n\t\t\t\n\t\t\tgetInfo()\n\t\t},\n\t\t\n\t\t//每次通话时候储存一个时间\n\t\tgetLastimes(){\n\t\t\tthis.callStartTime = common.getLastime()\n\t\t},\n\t\t\n\t\t//每次通话结束储存一个时间\n\t\tcallEndTime(){\n\t\t\tthis.endTime = common.callEndTimes()\n\t\t},\n\n\t\t// 从子级获取值\n\t\tgetMsgSon(val1,val2){\n\t\t\tthis.show = val1\n\t\t\tthis.leftval = val2\n\t\t},\n\t\t\n\t\t//aspect签出成功\n\t\tgetLogout(val){\n\t\t\tthis.show = val\n\t\t\tconsole.log('qianchuchengong')\n\t\t},\n\t\t\n\t\t//结束后处理需填写表单设置  \n\t\tendPhone(){\n\t\t\tvar self = this\n\t\t\tself.requestFlag = false //新建接口重新恢复请求\n\t\t\tif(self.connectFlag == 'Y' && !self.bossFlag){ //接通电话需要填写服务小结  且不在会议中\n\t\t\t\tuni.getStorage({\n\t\t\t\t\tkey: 'endPhoneFlag',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tif (!res.data) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '请填写服务小结',\n\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tconst serviceData = uni.getStorageSync('service_data');  //服务小结的内容\n\t\t\t\t\t\t\tconst contactUpdate = uni.getStorageSync('contact_update');//联络历史更新\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tasync function func(){\n\t\t\t\t\t\t\t\t//服务小结的内容\n\t\t\t\t\t\t\t\tawait api.batchTaskUpdate(self.apiDomian,self.uerInfo.token,serviceData)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//没有挂断电话情况提交服务小结的情况\n\t\t\t\t\t\t\t\tif( contactUpdate.callEndTime == '' ){ \n\t\t\t\t\t\t\t\t\tcontactUpdate.callEndTime = self.endTime \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif( contactUpdate.serviceEndTime == '' ){ \n\t\t\t\t\t\t\t\t\tcontactUpdate.serviceEndTime = self.endTime\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//联络历史更新\n\t\t\t\t\t\t\t\tawait api.apiinsEditUpdate(self.apiDomian,self.uerInfo.token,contactUpdate)\n\t\t\t\t\t\t\t\t//软电话显示示闲状态\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif( self.uerInfo.platformType == '3') {\n\t\t\t\t\t\t\t\t\tawait socketMain.agentavailable()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfunc()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tif( self.uerInfo.platformType == '3') {\n\t\t\t\t\tsocketMain.agentavailable()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 收起软电话\n\t\tclose(){\n\t\t\tthis.expand = true\n\t\t\tthis.$emit('expand','1')\n\t\t},\n\t\t\n\t\t//展开软电话\n\t\tchangeOpen(){\n\t\t\tthis.expand = false\n\t\t\tthis.$emit('expand','2')\n\t\t},\n\n\t\tgetState(val){\n\t\t\tthis.state = val\n\t\t},\n\t\t\n\t\t//接收拨号的电话 城市 省份\n\t\tgetCallNum(obj){\n\t\t\tthis.phonenum = obj.num\n\t\t\tthis.$emit('getPhoneObj',obj)\n\t\t},\n\t\t\n\t\t\n\t\t//咨询\n\t\tsetMeeting(flag){\n\t\t\tthis.meeting_flag = flag\n\t\t},\n\t\t//判断是拨打电话的弹窗  避免呼入弹窗冲突\n\t\tgetCallPhoneFlag(val){\n\t\t\tthis.callFlag = val\n\t\t},\n\n\t\t//计时器\n\t\tgetTimeDate() {\n\t\t\tvar self = this\n\t\t\tself.timer =  '00:00:00'\n\t\t\tclearInterval(self.timer_inter)\n\t\t\t\n\t\t\tvar hh = 0;\n\t\t\tvar mm = 0;\n\t\t\tvar ss = 0;\n\t\t\tvar str = '';\n\t\t\tthis.timer_inter = setInterval(function() {\n\t\t\t\tstr = \"\";\n\t\t\t\tif (++ss == 60) {\n\t\t\t\t\tif (++mm == 60) {\n\t\t\t\t\t\thh++;\n\t\t\t\t\t\tmm = 0;\n\t\t\t\t\t}\n\t\t\t\t\tss = 0;\n\t\t\t\t}\n\t\t\t\tstr += hh < 10 ? \"0\" + hh : hh;\n\t\t\t\tstr += \":\";\n\t\t\t\tstr += mm < 10 ? \"0\" + mm : mm;\n\t\t\t\tstr += \":\";\n\t\t\t\tstr += ss < 10 ? \"0\" + ss : ss;\n\t\t\t\tself.timer = str;\n\t\t\t}, 1000);\n\t\t},\n\t}\n}\n"],"sourceRoot":""}