{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/wechat（new)/components/Softphone.vue?a952","webpack:///C:/Users/Administrator/Desktop/wechat（new)/components/Softphone.vue?752f","webpack:///C:/Users/Administrator/Desktop/wechat（new)/components/Softphone.vue?e473","webpack:///C:/Users/Administrator/Desktop/wechat（new)/components/Softphone.vue?d40c","webpack:///C:/Users/Administrator/Desktop/wechat（new)/components/Softphone.vue"],"names":["props","class_a","String","socketObj","Object","phone","Number","pageName","toCallFlag","computed","components","Login","AgreeLogin","Available","Callphone","Handup","Callsuccess","Hold","Consult","Meeting","Reprocessing","Logining","Callcontent","Answer","data","expand","timer_inter","timer","phonenum","state","show","meeting_flag","leftval","NumArr","setStateActiveCallId","setStateCallId","otherPage","callPhone","endDate","starDate","city","province","phoneCode","callStartTime","phoneArea","requestFlag","endTime","customerCode","customerName","bossFlag","callFlag","connectFlag","phoneCallID","watch","dataobj","prevData","self","getTimeDate","res","Method","eventname","callid","$emit","callEndTime","localstate","console","log","callinfo","split","page_len","getCurrentPages","length","route_name","route","uni","switchTab","url","temp_phone","temp_phone2","uerInfo","extension","setStorage","key","success","getLastimes","tel","phone1","parseInt","toString","phone2","apiinsAdd","mounted","api","getCurrentDay","getPrevMonthDay","methods","getInfo","setPhone","getPhoneCode","apiDomian","token","rs","getCusInfo","obj","infoArr","records","clientId","clientName","post_obj","callType","ani","dnis","userCode","username","userName","nickname","organCode","organName","agentNo","serviceLog","campaignId","batchId","taskId","callId","serviceStartTime","getApiinsAdd","getLastime","callEndTimes","getMsgSon","val1","val2","endPhone","getStorage","showToast","title","duration","icon","func","batchTaskUpdate","serviceData","contactUpdate","serviceEndTime","apiinsEditUpdate","agentavailable","getStorageSync","close","changeOpen","getState","val","getCallNum","num","setMeeting","flag","getCallPhoneFlag","clearInterval","hh","mm","ss","str","setInterval"],"mappings":"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","file":"components/Softphone.js","sourcesContent":["import { render, staticRenderFns } from \"./Softphone.vue?vue&type=template&id=80bcc5c6&\"\nimport script from \"./Softphone.vue?vue&type=script&lang=js&\"\nexport * from \"./Softphone.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('80bcc5c6', component.options)\n    } else {\n      api.reload('80bcc5c6', component.options)\n    }\n    module.hot.accept(\"./Softphone.vue?vue&type=template&id=80bcc5c6&\", function () {\n      api.rerender('80bcc5c6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"wechat（new)/components/Softphone.vue\"\nexport default component.exports","export * from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Softphone.vue?vue&type=template&id=80bcc5c6&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Softphone.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Softphone.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {  mapState,  mapMutations  } from 'vuex';\nimport Login from \"@/components/softphone/Login.vue\" \nimport Logining from \"@/components/softphone/Logining.vue\"\nimport Available from \"@/components/softphone/Available.vue\"\nimport AgreeLogin from \"@/components/softphone/AgreeLogin.vue\"\nimport Callphone from \"@/components/softphone/Callphone.vue\"\nimport Handup from \"@/components/softphone/Handup.vue\"\nimport Callsuccess from \"@/components/softphone/Callsuccess.vue\"\nimport Hold from \"@/components/softphone/Hold.vue\"\nimport Consult from \"@/components/softphone/Consult.vue\"\nimport Meeting from \"@/components/softphone/Meeting.vue\"\nimport Reprocessing from \"@/components/softphone/Reprocessing.vue\"\nimport Callcontent from \"@/components/softphone/Callcontent.vue\"\nimport Answer from \"@/components/softphone/Answer.vue\"\nimport api from \"@/components/softphone/_api\";\n\nexport default {\n\tprops: {\n\t\tclass_a: String,\n\t\tsocketObj: Object,\n\t\tphone: Number,\n\t\tpageName: String,\n\t\ttoCallFlag: String\n\t},\n\t\n\t// 提取存储数据\n\tcomputed: mapState(['hasLogin', 'uerInfo']),\n\t\n\tcomponents :{\n\t\tLogin, //签入1\n\t\tAgreeLogin,  //登入成功（默认示忙）2\n\t\tAvailable,  //示闲 3\n\t\tCallphone, //拨打电话4\n\t\tHandup, // 振铃中(挂断按钮) 5\n\t\tCallsuccess, //接通电话6\n\t\tHold, //保持7\n\t\tConsult, //咨询8\n\t\tMeeting, //会议9\n\t\tReprocessing, //结束后处理10\n\t\tLogining, //签入中 11\n\t\tCallcontent, //通话连接中12\n\t\tAnswer, //接听13\n\t},\n\t\n\tdata() {\n\t\treturn {\n\t\t\texpand: false,  // 是否展开软电话\n\t\t\ttimer_inter: false, //计时器\n\t\t\ttimer: '00:00:00',    \n\t\t\tphonenum: '', //拨号输入的值\n\t\t\tstate : false, //当客户挂断电话后客户这边挂断的情况\n\t\t\tshow: 1, //1签入 2 示忙 3 示闲 4拨打电话 5振铃中(挂断按钮)  6接通电话  7保持 8咨询 9会议 10结束后处理 11签入中 12连接中 13接听来电\n\t\t\tmeeting_flag: false,\n\t\t\tleftval:'', //切换示忙原因\n\t\t\tNumArr: [1, 2, 3, 4, 5, 6, 7, 8, 9, 0], //拨号号码\n\t\t\tsetStateActiveCallId:'',  //普通用户id(当前接听的电话)\n\t\t\tsetStateCallId:'', // 平台客服id(转接、咨询等操作)\n\t\t\totherPage: false,  // 是否从别的页面来\n\t\t\tcallPhone:'',//呼入电话\n\t\t\tendDate:'', //结束时间(今天时间)\n\t\t\tstarDate:'', //开始时间（一个月前）\n\t\t\tcity:'', //电话号码的所在城市\n\t\t\tprovince:'',//电话号码的所在省份\n\t\t\tphoneCode:'',//手机区号\n\t\t\tcallStartTime:'', //每次通话开始保存一个时间\n\t\t\tphoneArea: {}   ,//手机归属地对象\n\t\t\trequestFlag: false,//判断新建联络历史接口只请求一次\n\t\t\tendTime:'',//通话结束时间\n\t\t\tcustomerCode:'', //客户ID\n\t\t\tcustomerName:'', //客户姓名\n\t\t\tbossFlag: false,// 判断是否是被咨询方   客服打给客服\n\t\t\tcallFlag: '',//拨号的标识\n\t\t\tconnectFlag : '', //判断电话有没有接通\n\t\t\tphoneCallID: '' //新建接口传的callid 比较长的号码\n\t\t}\n\t},\n\t\n\twatch:{\n\t\tsocketObj(dataobj,prevData){\n\t\t\tvar self = this  \n\t\t\tself.getTimeDate()//计时器\n\t\t\t\n\t\t\tif(dataobj.res == 1){\n\t\t\t\tswitch (dataobj.Method){ //主动触发按钮\n\t\t\t\t\tcase 'init':   // 签入中\n\t\t\t\t\t\tself.show = 11  \n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'agent_login': // 签入成功后（默认示忙）\n\t\t\t\t\t\tself.show = 2\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'agent_logout': // 签出成功\n\t\t\t\t\t\tself.show = 1 \n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'agent_available': //示闲中\n\t\t\t\t\t\tself.show = 3 \n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'agent_auxwork': //示忙中\n\t\t\t\t\t\t//self.show = 2 \n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'make_call': //拨打电话\n\t\t\t\t\t\tself.show = 12\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'answer':   //点击接听\n\t\t\t\t\t\tself.show = 6 \n\t\t\t\t\t\tbreak;   \n\t\t\t\t\tcase 'hangup':   //挂断（3个事件使用 挂断咨询 挂断会议 通话挂断）这里show显示要区分\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'hold':   //保持\n\t\t\t\t\t\tself.show = 7 \n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'unhold':   //取消保持\n\t\t\t\t\t\tself.show = 6 \n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'ini_consult':   //咨询 （这里的咨询挂断回到保持通话)\n\t\t\t\t\t\tself.show = 8 \n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'finish_conference':   //会议\n\t\t\t\t\t\tself.show = 9\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'finish_transfer':   //转接\n\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}      \n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tswitch (dataobj.eventname){   //接受实时事件\n\t\t\t\n\t\t\t\tcase 'ORIGINATED': //接通中\n\t\t\t\t\t\n\t\t\t\t\tif(!self.meeting_flag){ //不在会议的情况 点击咨询不进入判断 会直接跳状态8\n\t\t\t\t\t\tself.show = 12 //连接中\n\t\t\t\t\t\tself.setStateActiveCallId = dataobj.callid\n\t\t\t\t\t\tself.$emit(\"setStateActiveCallId\",self.setStateActiveCallId); \n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'CONNECTION_CLEARED': //挂断\n\t\t\t\t\tself.callEndTime() //通话结束储存一个时间\n\t\t\t\t\tself.$emit(\"callEndTime\",self.endTime); \n\t\t\t\t\t\n\t\t\t\t\tif( self.show == 5 ){ //客服挂断客服的通话\n\t\t\t\t\t\tif ( dataobj.localstate == '-1' ){\n\t\t\t\t\t\t\tself.show =10\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tself.show = 7\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//self.show = 7\n\t\t\t\t\t}else if( self.show == 6 ){ //客服挂断当前通话中的通话（挂断咨询的客服）\n\t\t\t\t\t\tif ( dataobj.localstate == '-1' && self.meeting_flag){ //客服挂断与客服的通话\n\t\t\t\t\t\t\tself.show = 7\n\t\t\t\t\t\t}else {   //客服挂断与客户的通话\n\t\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t\t}  \n\t\t\t\t\t} else if ( self.show == 7 ){ //客户挂断当前通话\n\t\t\t\t\t\tif( dataobj.localstate == '0' ){    // 被咨询的客户挂断\n\t\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t\t}else if ( dataobj.localstate == '-1' ){ \n\t\t\t\t\t\t\tif(self.meeting_flag){   //客服挂断与客户的通话\n\t\t\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t\t\t}else if(self.state == true){ //客户挂断电话后  客服挂断\n\t\t\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {   //客服挂断与被咨询的通话\n\t\t\t\t\t\t\t\tself.show = 7\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if ( dataobj.localstate == '4' ){ //客户挂断\n\t\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t\t}\n\t\t\t\t\t}else if ( self.show == 8 ){ \n\t\t\t\t\t\tif(self.meeting_flag && dataobj.localstate != '-1'){ //客服挂断客服\n\t\t\t\t\t\t\tself.show = 5\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tself.show = 7\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}else if ( self.show == 10 ){ //客服挂断客服\n\t\t\t\t\t\tif(!self.meeting_flag){ // 非咨询\n\t\t\t\t\t\t\tself.show = 10 \n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tself.show = 7\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}else {\n\t\t\t\t\t\tself.show = 10\n\t\t\t\t\t} \n\t\t\t\t\t\n\t\t\t\t\tself.meeting_flag = false\n\t\t\t\t\tbreak;\n\t\t\t\t\t   \n\t\t\t\tcase 'DELIVERED':   //振铃\n\t\t\t\t\tconsole.log('振铃中')\n\t\t\t\t\tif(!self.meeting_flag){\n\t\t\t\t\t\tself.phoneCallID = dataobj.callinfo.split('/')[2]  //接口传的callid 比较长的号码\n\t\t\t\t\t\tself.$emit(\"phoneCallID\",self.phoneCallID);\n\t\t\t\t\t\tself.setStateActiveCallId = dataobj.callid //存储CallID\n\t\t\t\t\t\tself.$emit(\"setStateActiveCallId\",self.setStateActiveCallId); \n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(self.otherPage){    // 别的页面来的  第2次响铃就不管了\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t\tself.otherPage = true\n\t\t\t\t\t\t\t\t\n\t\t\t\t    //呼入弹屏回到首页接收\n\t\t\t\t\tvar page_len = getCurrentPages().length\n\t\t\t\t\tvar route_name = getCurrentPages()[page_len-1].route\n\t\t\t\t\t\n\t\t\t\t\tif(route_name != 'pages/home/roster/callOut' && !self.callFlag ){\n\t\t\t\t\t\t//console.log(9998)\n\t\t\t\t\t\tself.callPhone = dataobj.callinfo.split('/')[0] //呼入电话存储\n\t\t\t\t\t\tself.$emit(\"getPhoneObj\",self.callPhone); //呼入电话  \n\t\t\t\t\t\t\n\t\t\t\t\t\tself.$emit(\"getPageLen\",2);//控制呼入弹屏 \n\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\turl:'/pages/index/home'  \n\t\t\t\t\t\t})\n\t\t\t\t\t}else if( route_name == 'pages/home/roster/callOut' \n\t\t\t\t\t\t\t\t&& self.pageName != '首页' \n\t\t\t\t\t\t\t\t&& !self.toCallFlag\n\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t//console.log(9999)\n\t\t\t\t\t\t\t\tself.$emit(\"getPageLen\",2);//控制呼入弹屏 \n\t\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\t\turl:'/pages/index/home'\n\t\t\t\t\t\t\t\t}) \n\t\t\t\t\t\t\t\tself.toCallFlag = true \n\t\t\t\t\t\t\t\n\t\t\t\t\t}else {\n\t\t\t\t\t\t//console.log(9997) \n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar temp_phone = dataobj.callinfo.split('/')[0]  //主叫号码\n\t\t\t\t\tvar temp_phone2 = dataobj.callinfo.split('/')[1]  //被叫号码 （如果两个号码相等说明是被咨询）\n\t\t\t\t\t\n\t\t\t\t\tif(temp_phone.length > 6){ //用户打进来接听电话  保存电话号码 (这里还需考虑到客服跟客服的通话号码是4)\n\t\t\t\t\t\tself.show = 13 // 接听\n\t\t\t\t\t\tself.phonenum = temp_phone\n\t\t\t\t\t\tself.setStateActiveCallId = dataobj.callid\n\t\t\t\t\t} else if ( temp_phone.length == temp_phone2.length && !self.meeting_flag){ //两个号码相等 且不在会议中=被咨询方\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 判断第一位是不是自己   自己5   否则13   \n\t\t\t\t\t\tif(self.uerInfo.extension == temp_phone){\n\t\t\t\t\t\t\tself.show = 5\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tself.show = 13 // 接听\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//self.show = 13 // 接听\n\t\t\t\t\t\tself.phonenum = temp_phone\n\t\t\t\t\t\tself.setStateActiveCallId = dataobj.callid\n\t\t\t\t\t\tself.bossFlag = true\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\telse if ( self.meeting_flag ) {  // 咨询的时候不显示 振铃中   \n\t\t\t\t\t\tself.show = 8      // 咨询中\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.show = 5    // 挂断    \n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ESTABLISHED': //通话中\n\t\t\t\t\tself.connectFlag = 'Y' //接通的标识\n\t\t\t\t\tself.$emit(\"connectFlag\",self.connectFlag); \n\t\t\t\t\t\n\t\t\t\t\t// 设置不可结束软电话\n\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\tkey: 'endPhoneFlag',\n\t\t\t\t\t\tdata: false,\n\t\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tif(self.meeting_flag){   // 多人进入会议\n\t\t\t\t\t\tself.show = 8 \n\t\t\t\t\t}else {\n\t\t\t\t\t\tself.show = 6 \n\t\t\t\t\t\tself.getLastimes() //通话开始储存一个时间\n\t\t\t\t\t\tself.$emit(\"callStartTime\",self.callStartTime); \n\t\t\t\t\t\t\n\t\t\t\t\t\tvar page_len = getCurrentPages().length\n\t\t\t\t\t\tvar route_name = getCurrentPages()[page_len-1].route\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(route_name == 'pages/home/roster/callOut'){\n\t\t\t\t\t\t\tif( self.requestFlag == false ){//判断新建接口是否请求\n\t\t\t\t\t\t\t\tself.$emit('apiinsAdd')\n\t\t\t\t\t\t\t\tself.requestFlag = true //请求完后面不需再请求\n\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else if( self.pageName == '首页' ){\n\t\t\t\t\t\t\tconsole.log('进入了首页')\n\t\t\t\t\t\t\tvar tel = dataobj.callinfo.split('/')\n\t\t\t\t\t\t\tvar phone1 = parseInt(tel[0]).toString() //主叫号码(去除首位0)\n\t\t\t\t\t\t\tvar phone2 = parseInt(tel[1]).toString() //被叫号码(去除首位0)\n\t\t\t\t\t\t\tif( self.requestFlag == false ){ //判断新建接口是否请求\n\t\t\t\t\t\t\t\tif( phone1.length > 6 ){\n\t\t\t\t\t\t\t\t\tself.apiinsAdd( '1',phone1,phone2 ) //新建 联络历史接口(呼入)\n\t\t\t\t\t\t\t\t\tself.requestFlag = true //请求完后面不需再请求\n\t\t\t\t\t\t\t\t} else if ( phone2.length > 6 ) {\n\t\t\t\t\t\t\t\t\tself.apiinsAdd( '0',phone1,phone2 ) //新建 联络历史接口(呼出)\n\t\t\t\t\t\t\t\t\tself.requestFlag = true//请求晚后面不需再请求\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'SERVICE_INITIATED': //咨询中\n\t\t\t\t\tself.setStateCallId = dataobj.callid\n\t\t\t\t\t\n\t\t\t\t\tbreak;\t\n\t\t\t\tcase 'TRANSFERRED': //咨询中\n\t\t\t\t\tself.show = 10 \n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}, \n\n\tmounted: function(){\n\t\t\n\t\tvar self = this\n\t\tthis.getTimeDate() // 计时器\n\t\tthis.endDate = api.getCurrentDay() //获取结束时间\n\t\tthis.starDate = api.getPrevMonthDay(this.endDate) //获取开始时间\n\t\tthis.phonenum = this.phone //详情页面传过来的电话\n\t},\n\n\n\tmethods: {\n\n\t\t//接通电话新建-联络历史\n\t\tapiinsAdd(key,phone1,phone2){\n\t\t\tvar self = this\n\t\t\tasync function getInfo(){\n\t\t\t\t\n\t\t\t\tif(key == 0){    //呼出\n\t\t\t\t\tvar setPhone = phone2\n\t\t\t\t}else{  //呼入\n\t\t\t\t\tvar setPhone = phone1\n\t\t\t\t}\n\t\t\t\t//获取手机归属地\n\t\t\t\tawait api.getPhoneCode(self.apiDomian,self.uerInfo.token,setPhone,function(data){\n\t\t\t\t\tvar rs = data[1].data.data\n\t\t\t\t\tif(rs){\n\t\t\t\t\t\tself.phoneArea = rs\n\t\t\t\t\t\tself.city = rs.city\n\t\t\t\t\t\tself.province = rs.province\n\t\t\t\t\t\tself.phoneCode = rs.phoneCode //电话区号\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\n\t\t\t\t//获取客户ID、姓名\n\t\t\t\tawait api.getCusInfo(self.apiDomian,self.uerInfo.token,setPhone,self.starDate,self.endDate,function(data){\n\t\t\t\t\tvar obj = data[1].data.data\n\t\t\t\t\tif(obj){\n\t\t\t\t\t\tvar infoArr = obj.records\n\t\t\t\t\t\tself.customerCode = infoArr[0].clientId //客户ID\n\t\t\t\t\t\tself.customerName = infoArr[0].clientName //客户姓名\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\n\t\t\t\tvar post_obj = {\n\t\t\t\t\tcallType: key, //呼叫方向\n\t\t\t\t\tani: phone1, //主叫号码\n\t\t\t\t\tdnis: phone2.length == 4 ? self.uerInfo.extension : phone2, //被叫号码\n\t\t\t\t\tcustomerCode: self.customerCode, //客户ID\n\t\t\t\t\tcustomerName: self.customerName, //客户姓名\n\t\t\t\t\tuserCode: self.uerInfo.username, //坐席工号\n\t\t\t\t\tuserName: self.uerInfo.nickname, //坐席姓名\n\t\t\t\t\torganCode: self.uerInfo.organCode, //坐席组织机构代码\n\t\t\t\t\torganName: self.uerInfo.organName, //坐席组织机构名称\n\t\t\t\t\tagentNo: self.uerInfo.agentNo, //坐席工号\n\t\t\t\t\tserviceLog:'', //服务结果(可以不传)\n\t\t\t\t\tcampaignId:'', //活动id (直接拨号的不传)\n\t\t\t\t\tbatchId:'', //批次id(直接拨号的不传)\n\t\t\t\t\ttaskId:'', //任务id(直接拨号的不传)\n\t\t\t\t\tphoneCode: self.phoneCode, //手机区号\n\t\t\t\t\tprovince: self.province , //归属地-省\n\t\t\t\t\tcity: self.city, //归属地-市\n\t\t\t\t\tcallId: self.phoneCallID, //通话id（较长的号码） \n\t\t\t\t\tcallStartTime: self.callStartTime, //通话开始时间\n\t\t\t\t\tserviceStartTime: self.callStartTime, //通话开始时间\n\t\t\t\t}\n\t\t\t\tawait api.getApiinsAdd(self.apiDomian,self.uerInfo.token,post_obj)\n\t\t\t}  \n\t\t\t\n\t\t\tgetInfo()\n\t\t},\n\t\t\n\t\t//每次通话时候储存一个时间\n\t\tgetLastimes(){\n\t\t\tthis.callStartTime = api.getLastime()\n\t\t},\n\t\t\n\t\t//每次通话结束储存一个时间\n\t\tcallEndTime(){\n\t\t\tthis.endTime = api.callEndTimes()\n\t\t},\n\n\t\t// 从子级获取值\n\t\tgetMsgSon(val1,val2){\n\t\t\tthis.show = val1\n\t\t\tthis.leftval = val2\n\t\t},\n\t\t\n\t\t//结束后处理需填写表单设置  \n\t\tendPhone(){\n\t\t\tvar self = this\n\t\t\tself.requestFlag = false //新建接口重新恢复请求\n\t\t\tif(self.connectFlag == 'Y' && !self.bossFlag){ //接通电话需要填写服务小结  且不在会议中\n\t\t\t\tuni.getStorage({\n\t\t\t\t\tkey: 'endPhoneFlag',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tif (!res.data) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '请填写服务小结',\n\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tconst serviceData = uni.getStorageSync('service_data');  //服务小结的内容\n\t\t\t\t\t\t\tconst contactUpdate = uni.getStorageSync('contact_update');//联络历史更新\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tasync function func(){\n\t\t\t\t\t\t\t\t//服务小结的内容\n\t\t\t\t\t\t\t\tawait api.batchTaskUpdate(self.apiDomian,self.uerInfo.token,serviceData)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//没有挂断电话情况提交服务小结的情况\n\t\t\t\t\t\t\t\tif( contactUpdate.callEndTime == '' ){ \n\t\t\t\t\t\t\t\t\tcontactUpdate.callEndTime = self.endTime \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif( contactUpdate.serviceEndTime == '' ){ \n\t\t\t\t\t\t\t\t\tcontactUpdate.serviceEndTime = self.endTime\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//联络历史更新\n\t\t\t\t\t\t\t\tawait api.apiinsEditUpdate(self.apiDomian,self.uerInfo.token,contactUpdate)\n\t\t\t\t\t\t\t\t//软电话显示示闲状态\n\t\t\t\t\t\t\t\tawait api.agentavailable()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfunc()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tapi.agentavailable()\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 收起软电话\n\t\tclose(){\n\t\t\tthis.expand = true\n\t\t\tthis.$emit('expand','1')\n\t\t},\n\t\t\n\t\t//展开软电话\n\t\tchangeOpen(){\n\t\t\tthis.expand = false\n\t\t\tthis.$emit('expand','2')\n\t\t},\n\n\t\tgetState(val){\n\t\t\tthis.state = val\n\t\t},\n\t\t\n\t\t//接收拨号的电话 城市 省份\n\t\tgetCallNum(obj){\n\t\t\tthis.phonenum = obj.num\n\t\t\tthis.$emit('getPhoneObj',obj)\n\t\t},\n\t\t\n\t\t\n\t\t//咨询\n\t\tsetMeeting(flag){\n\t\t\tthis.meeting_flag = flag\n\t\t},\n\t\t//判断是拨打电话的弹窗  避免呼入弹窗冲突\n\t\tgetCallPhoneFlag(val){\n\t\t\tthis.callFlag = val\n\t\t},\n\n\t\t//计时器\n\t\tgetTimeDate() {\n\t\t\tvar self = this\n\t\t\tself.timer =  '00:00:00'\n\t\t\tclearInterval(self.timer_inter)\n\t\t\t\n\t\t\tvar hh = 0;\n\t\t\tvar mm = 0;\n\t\t\tvar ss = 0;\n\t\t\tvar str = '';\n\t\t\tthis.timer_inter = setInterval(function() {\n\t\t\t\tstr = \"\";\n\t\t\t\tif (++ss == 60) {\n\t\t\t\t\tif (++mm == 60) {\n\t\t\t\t\t\thh++;\n\t\t\t\t\t\tmm = 0;\n\t\t\t\t\t}\n\t\t\t\t\tss = 0;\n\t\t\t\t}\n\t\t\t\tstr += hh < 10 ? \"0\" + hh : hh;\n\t\t\t\tstr += \":\";\n\t\t\t\tstr += mm < 10 ? \"0\" + mm : mm;\n\t\t\t\tstr += \":\";\n\t\t\t\tstr += ss < 10 ? \"0\" + ss : ss;\n\t\t\t\tself.timer = str;\n\t\t\t}, 1000);\n\t\t},\n\t}\n}\n"],"sourceRoot":""}